# SDK 测试完善计划

**日期**: 2026-02-11
**目标**: 将 SDK 测试覆盖率从 34.96% 提升到 >80%

---

## 当前状态

### 测试覆盖率

```
总体: 34.96% ❌

├─ Core 包: 89.35% ✅
│  ├─ LRU Cache: 99.12%
│  ├─ Transport: 89.67%
│  ├─ Utils: 91.23%
│  └─ Config: 97.58%
│
├─ Flap 包: 0% ❌
│  ├─ platform.ts: 0% (531 行)
│  ├─ platform-query.ts: 0% (172 行)
│  └─ utils: 0% (66 行)
│
├─ FourMeme 包: 0% ❌
│  ├─ platform.ts: 0%
│  └─ platform-query.ts: 0%
│
├─ Luna 包: 0% ❌
│  ├─ platform.ts: 0%
│  └─ platform-query.ts: 0%
│
└─ PancakeSwap 包: 未知
```

---

## 实施计划

### 阶段 1: 准备工作 (1 天)

**任务**:
- [ ] 创建测试工具和 Mock
- [ ] 设置测试配置
- [ ] 准备测试数据

### 阶段 2: Flap 平台测试 (3 天)

**任务**:
- [ ] 创建 platform.test.ts (~800 行)
- [ ] 创建 platform-query.test.ts (~300 行)
- [ ] 创建 utils.test.ts (~150 行)

**目标覆盖率**: >80%

### 阶段 3: FourMeme 平台测试 (3 天)

**任务**:
- [ ] 创建 platform.test.ts (~900 行)
- [ ] 创建 platform-query.test.ts (~300 行)
- [ ] 创建 utils.test.ts (~150 行)

**目标覆盖率**: >80%

### 阶段 4: Luna 平台测试 (3 天)

**任务**:
- [ ] 创建 platform.test.ts (~800 行)
- [ ] 创建 platform-query.test.ts (~300 行)
- [ ] 创建 utils.test.ts (~150 行)

**目标覆盖率**: >80%

### 阶段 5: PancakeSwap 平台测试 (4 天)

**任务**:
- [ ] 创建 platform.test.ts (~1000 行)
- [ ] 创建 V2/V3 特定测试

**目标覆盖率**: >80%

### 阶段 6: 集成测试和优化 (2 天)

**任务**:
- [ ] 创建端到端集成测试
- [ ] 优化测试性能
- [ ] 修复发现的 bug

---

## 预计工作量

| 模块 | 测试代码 | 工作量 |
|------|---------|--------|
| 测试工具 | 500 行 | 1 天 |
| Flap 平台 | 1,250 行 | 3 天 |
| FourMeme 平台 | 1,350 行 | 3 天 |
| Luna 平台 | 1,250 行 | 3 天 |
| PancakeSwap 平台 | 1,000 行 | 4 天 |
| 集成测试 | 500 行 | 2 天 |
| **总计** | **5,850 行** | **16 天** |

**总工期**: 16 个工作日 (约 3 周)

---

## 成功标准

- ✅ 总体覆盖率: >80%
- ✅ 所有平台覆盖率: >80%
- ✅ 所有测试通过
- ✅ 无已知 bug

---

**报告日期**: 2026-02-11
**预计完成**: 2026-03-04 (3 周后)
**状态**: 计划完成，待实施
